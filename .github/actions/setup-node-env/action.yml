description: Sets up Node.js, installs dependencies, and caches them.
inputs:
  cache:
    default: npm
    description: Cache npm dependencies.
    required: false
  node-version-file:
    default: .nvmrc
    description: Path to the .nvmrc file.
    required: false
name: Setup Node.js Environment
runs:
  steps:
    - name: Checkout code
      uses: actions/checkout@09d2acae674a48949e3602304ab46fd20ae0c42f # Pinned to SHA
      with:
        fetch-depth: 0
        submodules: recursive
    - name: Set up Node.js
      uses: actions/setup-node@49933ea5288caeca8642d1e84afbd3f7d6820020 # Pinned to SHA
      with:
        node-version-file: ${{ inputs.node-version-file }} # Use input directly
        cache: ${{ inputs.cache }} # Use input for cache
    - name: Install dependencies
      run: npm ci
      shell: bash
  using: composite
